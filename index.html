<html>
	<head>
        <title>Playstation 2</title>
        <link rel="stylesheet" href="./index.css">
        <meta charset="utf-8"/>
	</head>
	<body>
        <div id="info">Sony Computer Entertainment</div>
        <button id="restart"> Restart </button>
        <script src="js/three.js"></script>
        
		<script>
            //Setup
            //-----
			var scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x265b9b, 90, 500);
            scene.background = new THREE.Color( 0x191819 );
            scene.fog = new THREE.Fog(0x005B96, 1, 100);

			var camera = new THREE.PerspectiveCamera( 25, window.innerWidth/window.innerHeight, 1, 1100 );
            camera.target = new THREE.Vector3(0, 0, 0);
            camera.lookAt(camera.target);
            camera.position.z = 100;

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

            var clock = new THREE.Clock();

            //Lighting
            //--------

            var light = new THREE.PointLight( 0xffffff, 3, 100, 2 );
            light.position.set( 0, 0, 100 );
            scene.add( light );

            //Basic Box
            //---------
            var positionDict = {};
            for (x = -4; x < 6; x++){
                for (y = -4; y < 4; y++){
                    var geometry = new THREE.BoxGeometry( .8, .8, 10 );
                    var material = new THREE.MeshPhongMaterial( { color: 0x474141 } );
                    var cube = new THREE.Mesh( geometry, material );
                    var wildX = Math.random(); 
                    var wildY = 0.5 + Math.random();
                    var posX = x * 1.5 * wildX;
                    var posY = y * wildY;
                    if (positionDict[Math.floor(posX)] == Math.floor(posY)){
                        break;
                    }
                    else {
                        positionDict[Math.floor(posX)] = Math.floor(posY);
                        console.log(positionDict[posX]);
                        cube.position.set(posX, posY ,70)
                        scene.add( cube );
                    }
                }
            }

            
            function cameraAnimate(){
                if (clock.getElapsedTime() < 9){
                    console.log("SLOW");
                    camera.position.z -= .01;
                    camera.rotation.z += .00005;
                }
                else if (clock.getElapsedTime() > 11){
                    return;
                }
                else{
                    console.log("FAST");
                    camera.position.z -= .8;
                    camera.rotation.z += .02;
                }
            } 

			var animate = function () {
                
				requestAnimationFrame( animate );
				cameraAnimate()
                
                camera.rotation.z += .002;

				renderer.render(scene, camera);
			};

			animate();

            var listener = new THREE.AudioListener();
            camera.add( listener );

            // create a global audio source
            var sound = new THREE.Audio( listener );

            // load a sound and set it as the Audio object's buffer
            var audioLoader = new THREE.AudioLoader();
            audioLoader.load( 'sounds/startup.mp3', function( buffer ) {
                sound.setBuffer( buffer );
                sound.setLoop( false );
                sound.setVolume( 0.5 );
                sound.play();
            });
		</script>
	</body>
</html>